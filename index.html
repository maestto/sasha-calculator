<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0f766e" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="SashaCalc" />
  <link rel="manifest" href="./manifest.json" />
  <link rel="icon" type="image/png" sizes="192x192" href="./icons/icon-192.png" />
  <link rel="apple-touch-icon" href="./icons/icon-192.png" />
  <link rel="stylesheet" href="./css/main.css" />
  <title>Sasha Calculator</title>
</head>
<body>
  <div class="app-shell">
    <main class="content" aria-label="Калькулятор зарплаты">
      <section class="header-card">
        <div class="header-row">
          <h1>Калькулятор зарплаты</h1>
          <div class="header-actions">
            <button id="exportBtn" class="top-btn" type="button">Экспорт</button>
            <button id="settingsBtn" class="top-btn" type="button">⚙</button>
          </div>
        </div>
      </section>

      <ul id="shiftList" class="shift-list" aria-live="polite"></ul>
    </main>

    <div class="fixed-stack" aria-label="Фиксированные панели">
      <div class="fixed-stack-inner">
        <section class="summary-dock" aria-label="Итоги">
          <div class="stats-grid">
            <div class="stat-card">
              <span class="stat-label">Смен</span>
              <span id="shiftCount" class="stat-value">0</span>
            </div>
            <div class="stat-card">
              <span class="stat-label">Касса</span>
              <span id="cashTotal" class="stat-value">0 ₽</span>
            </div>
            <div class="stat-card">
              <span class="stat-label">Зарплата</span>
              <span id="salaryTotal" class="stat-value stat-salary">0 ₽</span>
            </div>
          </div>
          <div class="summary-footer">
            <p id="fixedInfo" class="fixed-info">Фикс: 3 000 ₽ / смена</p>
            <button id="clearBtn" class="clear-btn" type="button">Очистить</button>
          </div>
        </section>

        <form id="cashForm" class="input-dock" autocomplete="off">
          <input
            id="cashInput"
            class="cash-input"
            type="text"
            inputmode="numeric"
            placeholder="Введите кассу за смену"
            aria-label="Введите кассу за смену"
            autofocus
          />
          <button id="addBtn" class="add-btn" type="submit" aria-label="Добавить смену">+</button>
        </form>
      </div>
    </div>
  </div>

  <div id="sheetBackdrop" class="sheet-backdrop" hidden></div>

  <section id="settingsSheet" class="sheet" hidden aria-hidden="true" aria-modal="true" role="dialog">
    <div class="sheet-panel">
      <div class="sheet-handle" aria-hidden="true"></div>
      <div class="sheet-header">
        <h2 class="sheet-title">Настройки</h2>
        <button class="sheet-close" type="button" data-close-sheet="settings" aria-label="Закрыть">×</button>
      </div>

      <label for="userNameInput" class="field-label">Имя пользователя</label>
      <input
        id="userNameInput"
        class="field-input"
        type="text"
        autocomplete="name"
        placeholder="Например: Александра"
      />

      <p class="sheet-copy">Настройте диапазоны кассы и проценты. Пустое поле «До» означает бесконечность.</p>

      <div class="rules-header" aria-hidden="true">
        <span>От</span>
        <span>До</span>
        <span>%</span>
        <span></span>
      </div>
      <div id="rulesList" class="rules-list"></div>

      <button id="addRuleBtn" class="secondary-btn" type="button">+ Добавить правило</button>

      <label for="fixedPerShiftInput" class="field-label">Фиксированная оплата за смену (руб)</label>
      <input
        id="fixedPerShiftInput"
        class="field-input"
        type="text"
        inputmode="numeric"
        placeholder="3 000"
      />

      <button id="saveSettingsBtn" class="primary-btn" type="button">Сохранить настройки</button>
    </div>
  </section>

  <section id="exportSheet" class="sheet" hidden aria-hidden="true" aria-modal="true" role="dialog">
    <div class="sheet-panel">
      <div class="sheet-handle" aria-hidden="true"></div>
      <div class="sheet-header">
        <h2 class="sheet-title">Экспорт</h2>
        <button class="sheet-close" type="button" data-close-sheet="export" aria-label="Закрыть">×</button>
      </div>
      <p class="sheet-copy">Скопируйте данные или выгрузите их в удобном формате.</p>

      <textarea id="exportPreview" class="export-preview" readonly></textarea>

      <button id="copyExportBtn" class="primary-btn" type="button">Копировать</button>
      <button id="downloadTxtBtn" class="secondary-btn" type="button">Скачать TXT</button>
      <button id="downloadCsvBtn" class="secondary-btn" type="button">Скачать CSV</button>
      <button id="telegramExportBtn" class="secondary-btn" type="button">Отправить в Telegram</button>
    </div>
  </section>

  <script type="module" src="./js/app.js"></script>
</body>
</html>
